# config.js â€” Frontend Configuration

## Purpose
Configuration file that controls frontend behavior including the AWS cost dashboard display and API endpoint URLs. Provides centralized configuration for all frontend features.

## Location
- Source: `site/config.js`
- Deployed to: S3 bucket as `config.js` (same bucket as `index.html`)

## Configuration Object
The file defines a global `window.APP_CONFIG` object:
```javascript
window.APP_CONFIG = {
  showCostPanel: true,
  apiUrl: "https://<api-gateway-id>.execute-api.eu-west-2.amazonaws.com"
};
```

### Configuration Properties
- **`showCostPanel`** (boolean): Controls whether the AWS cost dashboard panel is displayed
- **`apiUrl`** (string): API Gateway base URL for all frontend API calls

## API URL Usage
- **Dynamic Configuration**: The `apiUrl` is set by Terraform outputs and used by all frontend API calls
- **Fallback**: Frontend code includes fallback logic: `const apiUrl = (window.APP_CONFIG && window.APP_CONFIG.apiUrl) || "https://fallback-url.execute-api.eu-west-2.amazonaws.com"`
- **Endpoints**: Used for OCR processing, visitor tracking, statistics, costs, todos, menu management, and cache operations

## Cost Panel Control
- **`true`**: The cost panel is displayed and `GET /costs` is called on page load
- **`false`** (or if config.js fails to load): The cost panel remains hidden

## How to Modify Configuration
**To disable cost panel**: Set `showCostPanel: false` and run `terraform apply`

**To update API URL**: The `apiUrl` is automatically set by Terraform from the `presign_api_url` output

## Terraform Integration
```hcl
resource "aws_s3_object" "site_config" {
  bucket       = aws_s3_bucket.site.id
  key          = "config.js"
  source       = "${path.module}/site/config.js"
  content_type = "application/javascript"
  etag         = filemd5("${path.module}/site/config.js")
}
```

The `config.js` content is dynamically generated by Terraform using template substitution with the API Gateway URL.
